namespace = holy_order_game_start
###Holy Order Founding Test
holy_order_game_start.0001 = { #1187
	type = empty
	hidden = yes

	immediate = {
		# Display simplified results.
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_jerusalem = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		character:231001 = {
			save_scope_as = leader
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader
			capital = scope:leased_barony
			save_scope_as = new_holy_order
		}
		hidden_effect = {
			scope:leader = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}# Achievement flag.
		#add_achievement_flag_effect = { FLAG = achievement_non_nobis_domine_flag }
		# Some minor misc effects.
		#create_holy_order_effect = yes
		scope:leader.primary_title = {
			#copy_title_history = title:d_knights_templar
			set_coa = ho_knights_templar
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_shayzar = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_nizari
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_nizari = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_nizari = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_nizari }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_nizari = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_nizari }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		character:227012 = {
			save_scope_as = leader_nizari
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_nizari
			capital = scope:leased_barony_nizari
			save_scope_as = new_holy_order_nizari
		}
		hidden_effect = {
			scope:leader_nizari = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_nizari.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_jerusalem = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_hospitaller
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_hospitaller = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_hospitaller = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_hospitaller }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_hospitaller = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_hospitaller }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		character:147009 = {
			save_scope_as = leader_hospitaller
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_hospitaller
			capital = scope:leased_barony_hospitaller
			save_scope_as = new_holy_order_hospitaller
		}
		hidden_effect = {
			scope:leader_hospitaller = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_hospitaller.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_acre = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_teutonic
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_teutonic = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_teutonic = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_teutonic }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_teutonic = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_teutonic }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		
		character:30400 = {
				save_scope_as = leader_teutonic
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_teutonic
			capital = scope:leased_barony_teutonic
			save_scope_as = new_holy_order_teutonic
		}
		hidden_effect = {
			scope:leader_teutonic = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_teutonic.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_calatrava = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_calatrava
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_calatrava = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_calatrava = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_calatrava }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_calatrava = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_calatrava }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		
		character:73153 = {
				save_scope_as = leader_calatrava
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_calatrava
			capital = scope:leased_barony_calatrava
			save_scope_as = new_holy_order_calatrava
		}
		hidden_effect = {
			scope:leader_calatrava = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_calatrava.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_caceres = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_alcantara
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_alcantara = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_alcantara = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_alcantara }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_alcantara = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_alcantara }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		create_character = {
			template = castilian_knight_character
			location = scope:leased_barony_alcantara.title_province
			save_scope_as = leader_alcantara
		}
		
		#character:224003 = {
				#save_scope_as = leader_alcantara
		#}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_alcantara
			capital = scope:leased_barony_alcantara
			save_scope_as = new_holy_order_alcantara
		}
		hidden_effect = {
			scope:leader_alcantara = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_alcantara.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_santiago = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_santiago
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_santiago = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_santiago = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_santiago }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_santiago = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_santiago }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = galician_knight_character
			#location = #scope:leased_barony_santiago.title_province
			#save_scope_as = leader_santiago
		#}
		
		character:sancho_fernandez_de_lemos = {
			save_scope_as = leader_santiago
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_santiago
			capital = scope:leased_barony_santiago
			save_scope_as = new_holy_order_santiago
		}
		hidden_effect = {
			scope:leader_santiago = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_santiago.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
	}
}

holy_order_game_start.0002 = { #1204
	type = empty
	hidden = yes

	immediate = {
		# Display simplified results.
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_jerusalem = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		character:144615 = {
			save_scope_as = leader
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader
			capital = scope:leased_barony
			save_scope_as = new_holy_order
		}
		hidden_effect = {
			scope:leader = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}# Achievement flag.
		#add_achievement_flag_effect = { FLAG = achievement_non_nobis_domine_flag }
		# Some minor misc effects.
		#create_holy_order_effect = yes
		scope:leader.primary_title = {
			#copy_title_history = title:d_knights_templar
			set_coa = ho_knights_templar
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_shayzar = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_nizari
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_nizari = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_nizari = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_nizari }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_nizari = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_nizari }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		character:144228 = {
			save_scope_as = leader_nizari
		}
		
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_nizari
			capital = scope:leased_barony_nizari
			save_scope_as = new_holy_order_nizari
		}
		hidden_effect = {
			scope:leader_nizari = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_nizari.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_jerusalem = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_hospitaller
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_hospitaller = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_hospitaller = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_hospitaller }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_hospitaller = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_hospitaller }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		
		character:142132 = {
				save_scope_as = leader_hospitaller
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_hospitaller
			capital = scope:leased_barony_hospitaller
			save_scope_as = new_holy_order_hospitaller
		}
		hidden_effect = {
			scope:leader_hospitaller = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_hospitaller.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
	
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_acre = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_teutonic
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_teutonic = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_teutonic = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_teutonic }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_teutonic = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_teutonic }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		
		character:30401 = {
				save_scope_as = leader_teutonic
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_teutonic
			capital = scope:leased_barony_teutonic
			save_scope_as = new_holy_order_teutonic
		}
		hidden_effect = {
			scope:leader_teutonic = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_teutonic.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_calatrava = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_calatrava
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_calatrava = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_calatrava = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_calatrava }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_calatrava = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_calatrava }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		
		character:224003 = {
				save_scope_as = leader_calatrava
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_calatrava
			capital = scope:leased_barony_calatrava
			save_scope_as = new_holy_order_calatrava
		}
		hidden_effect = {
			scope:leader_calatrava = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_calatrava.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_caceres = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_alcantara
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_alcantara = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_alcantara = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_alcantara }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_alcantara = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_alcantara }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		create_character = {
			template = castilian_knight_character
			location = scope:leased_barony_alcantara.title_province
			save_scope_as = leader_alcantara
		}
		
		#character:224003 = {
				#save_scope_as = leader_alcantara
		#}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_alcantara
			capital = scope:leased_barony_alcantara
			save_scope_as = new_holy_order_alcantara
		}
		hidden_effect = {
			scope:leader_alcantara = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_alcantara.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_santiago = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_santiago
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_santiago = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_santiago = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_santiago }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_santiago = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_santiago }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = galician_knight_character
			#location = scope:leased_barony_santiago.title_province
			#save_scope_as = leader_santiago
		#}
		
		character:suero_rodriguez = {
			save_scope_as = leader_santiago
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_santiago
			capital = scope:leased_barony_santiago
			save_scope_as = new_holy_order_santiago
		}
		hidden_effect = {
			scope:leader_santiago = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_santiago.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
	}
}	
	holy_order_game_start.0003 = { #1337
	type = empty
	hidden = yes

	immediate = {
		# Display simplified results.
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_nicosia = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony }
				}
			}
		}
		create_character = {
			template = french_knight_character
			location = scope:leased_barony.title_province
			save_scope_as = leader
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader
			capital = scope:leased_barony
			save_scope_as = new_holy_order
		}
		hidden_effect = {
			scope:leader = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}# Achievement flag.
		#add_achievement_flag_effect = { FLAG = achievement_non_nobis_domine_flag }
		# Some minor misc effects.
		#create_holy_order_effect = yes
		scope:leader.primary_title = {
			#copy_title_history = title:d_knights_templar
			set_coa = ho_knights_templar
		}
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_rhodos = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_hospitaller
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_hospitaller = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_hospitaller = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_hospitaller }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_hospitaller = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_hospitaller }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		create_character = {
			template = french_knight_character
			location = scope:leased_barony_hospitaller.title_province
			save_scope_as = leader_hospitaller
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_hospitaller
			capital = scope:leased_barony_hospitaller
			save_scope_as = new_holy_order_hospitaller
		}
		hidden_effect = {
			scope:leader_hospitaller = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_hospitaller.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
	
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_malbork = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_teutonic
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_teutonic = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_teutonic = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_teutonic }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_teutonic = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_teutonic }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		create_character = {
			template = german_knight_character
			location = scope:leased_barony_teutonic.title_province
			save_scope_as = leader_teutonic
		}
		
		#character:30401 = {
				#save_scope_as = leader_teutonic
		#}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_teutonic
			capital = scope:leased_barony_teutonic
			save_scope_as = new_holy_order_teutonic
		}
		hidden_effect = {
			scope:leader_teutonic = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_teutonic.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		
		
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_calatrava = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_calatrava
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_calatrava = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_calatrava = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_calatrava }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_calatrava = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_calatrava }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = fp1_jomsviking_bigwig
			#location = scope:leased_barony.title_province
			#save_scope_as = leader
		#}
		
		character:457015 = {
				save_scope_as = leader_calatrava
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_calatrava
			capital = scope:leased_barony_calatrava
			save_scope_as = new_holy_order_calatrava
		}
		hidden_effect = {
			scope:leader_calatrava = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_calatrava.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_caceres = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_alcantara
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_alcantara = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_alcantara = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_alcantara }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_alcantara = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_alcantara }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		create_character = {
			template = castilian_knight_character
			location = scope:leased_barony_alcantara.title_province
			save_scope_as = leader_alcantara
		}
		
		#character:224003 = {
				#save_scope_as = leader_alcantara
		#}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_alcantara
			capital = scope:leased_barony_alcantara
			save_scope_as = new_holy_order_alcantara
		}
		hidden_effect = {
			scope:leader_alcantara = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_alcantara.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
		custom_tooltip = create_holy_order_decision_effect_message
		# Select a random county.
		title:c_santiago = {
			#limit = { fp1_valid_county_for_jomsvikings_trigger = yes }
			save_scope_as = designated_county_santiago
		}
		# Select an appropriate barony.
		## If there's an empty space in the capital, we create a castle.
		if = {
			limit = {
				scope:designated_county_santiago = {
					any_county_province = { has_holding = no }
				}
			}
			scope:designated_county_santiago = {
				random_county_province = {
					limit = { has_holding = no }
					set_holding_type = castle_holding
					barony = { save_scope_as = leased_barony_santiago }
				}
			}
		}
		## Otherwise, grab an existing non-capital castle/city.
		else = {
			scope:designated_county_santiago = {
				random_county_province = {
					limit = {
						is_county_capital = no
						OR = {
							has_holding_type = castle_holding
							has_holding_type = city_holding
						}
					}
					barony = { save_scope_as = leased_barony_santiago }
				}
			}
		}
		# Create a suitable leader for the Jomsvikings.
		#create_character = {
			#template = galician_knight_character
			#location = scope:leased_barony_santiago.title_province
			#save_scope_as = leader_santiago
		#}
		
		character:vasco_rodriguez_de_coronado = {
			save_scope_as = leader_santiago
		}
		# Create the actual holy order.
		create_holy_order = {
			leader = scope:leader_santiago
			capital = scope:leased_barony_santiago
			save_scope_as = new_holy_order_santiago
		}
		hidden_effect = {
			scope:leader_santiago = {
				add_trait = order_member
				add_piety_level = 2
				add_gold = holy_order_starting_gold
				every_courtier = { add_trait = order_member }
			}
		}
		
		## Give it some buildings.
		hidden_effect = {
			scope:leased_barony_santiago.title_province = {
				# Walls & Towers.
				if = {
					limit = {
						NOT = { has_building_or_higher = curtain_walls_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = curtain_walls_01
				}
				# Barracks.
				if = {
					limit = {
						NOT = { has_building_or_higher = barracks_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = barracks_01
				}
				# Military Camps.
				if = {
					limit = {
						NOT = { has_building_or_higher = military_camps_01 }
					}
					# If it doesn't have a free building slot, give it one.
					if = {
						limit = { free_building_slots = 0 }
						add_building_slot = 1
					}
					# Add the building.
					add_building = military_camps_01
				}
			}
		}
	}
}