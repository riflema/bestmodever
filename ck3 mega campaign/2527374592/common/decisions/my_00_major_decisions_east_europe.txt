serbian_empire_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes
	ai_check_interval = 120
	desc = serbian_empire_decision_desc

	is_shown = {
		game_start_date = 1337.1.1
		has_culture = culture:serbian
		has_title = title:k_serbia
		highest_held_title_tier = tier_kingdom
	}

	is_valid = {
		has_primary_title = title:k_serbia
		prestige_level >= high_prestige_level
		completely_controls_region = custom_greater_serbia
	}

	effect = {
		save_scope_as = super_serb

		show_as_tooltip = { serbian_empire_decision_effects = yes } #Actually applied in east_europe.9001 - prestige, laws, title, innovation effects

		#Events
		trigger_event = east_europe.9001
		every_player = {
			limit = {
				NOT = { this = scope:super_serb }
				is_within_diplo_range = { CHARACTER = scope:super_serb }
			}
			trigger_event = east_europe.9002
		}

		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:serbian_empire_decision
		}
	}

	is_valid_showing_failures_only = {
		is_independent_ruler = yes
		is_available_adult = yes
		#Can't be fighting elsewhere.
		is_at_war = no
	}
	
	cost = { gold = { value = 600 } }

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

reunite_two_sicilies_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes
	ai_check_interval = 120
	desc = reunite_two_sicilies_decision_desc

	is_shown = {
		game_start_date = 1337.1.1
		OR = {
			has_primary_title = title:k_naples
			has_primary_title = title:k_trinacria
		}
	}

	is_valid = {
		has_title = title:k_naples
		has_title = title:k_trinacria
		completely_controls = title:k_naples
		completely_controls = title:k_trinacria
	}

	effect = {
		#show_as_tooltip = { reunite_two_sicilies_effect = yes } #Actually applied in sicily.9001 - prestige, laws, title, innovation effects

		#Events
		if = {
			limit = {
				has_primary_title = title:k_naples
			}
			title:k_sicily = {
				set_capital_county = title:k_naples.title_capital_county
				copy_title_history = title:k_naples
			}
		}
		if = {
			limit = {
				has_primary_title = title:k_trinacria
			}
			title:k_sicily = {
				copy_title_history = title:k_trinacria
			}
		}
		reunite_two_sicilies_effect = yes

		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:reunite_two_sicilies_decision
		}
	}

	is_valid_showing_failures_only = {
		is_independent_ruler = yes
		is_available_adult = yes
		#Can't be fighting elsewhere.
		is_at_war = no
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

restore_principality_of_carantania_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"
	major = yes

	ai_check_interval = 120

	desc = restore_principality_of_carantania_decision_desc
	selection_tooltip = restore_principality_of_carantania_decision_tooltip

	is_shown = {
		is_ruler = yes
		is_landed = yes
		exists = dynasty
		culture = culture:carantanian

		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_carantania
			}
		}
		OR = {
			has_government = feudal_government
			has_government = clan_government
		}
		highest_held_title_tier <= tier_duchy
	}

	is_valid = {
		#Either independent or in the HRE
		OR = {
			is_independent_ruler = yes
			top_liege = { has_title = title:e_hre }
		}

		#You must control the kingdom's heartlands.
		has_title = title:d_carinthia
		has_title = title:d_steyermark
		has_title = title:d_krain
		completely_controls = title:d_carinthia
		completely_controls = title:d_steyermark
		completely_controls = title:d_krain

		#You must be sufficiently advanced to conceive of having a separate kingdom, rather than being Croatian or Serbian.
		culture = { has_cultural_era_or_later = culture_era_early_medieval }
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		save_scope_as = restorer
		show_as_tooltip = { restore_principality_of_carantania_decision_scripted_effect = yes }
		trigger_event = { id = east_europe.9101 }
		#Notify other players.
		every_player = {
			limit = {
				NOT = { this = scope:restorer }
				top_liege = {
					OR = {
						this = scope:restorer
						any_neighboring_and_across_water_top_liege_realm_owner = { this = scope:restorer }
					}
				}
			}
			#trigger_event = east_europe.9102
		}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_carantania
			}
			set_global_variable = {
				name = flag_restored_carantania
				value = scope:restorer
			}
		}
	}

	cost = {
		gold = 300
		prestige = 200
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

empire_of_bulgaria_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"
	major = yes

	ai_check_interval = 120

	desc = empire_of_bulgaria_decision_desc
	selection_tooltip = empire_of_bulgaria_decision_tooltip

	is_shown = {
		is_ruler = yes
		is_landed = yes
		exists = dynasty
		OR = {
			culture = culture:bulgarian
			culture = culture:bolghar
		}
		has_title = title:k_bulgaria

		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_bulgaria
			}
		}
		NOT = { exists = title:e_bulgaria.holder }
		highest_held_title_tier <= tier_kingdom
	}

	is_valid = {
		prestige_level >= 3
		is_independent_ruler = yes
		has_title = title:k_bulgaria
		custom_description = {
		text = hold_kingdom_other_than_bulgaria
			any_held_title = {
				count >= 2
				tier = tier_kingdom
			}
		}
		sub_realm_size >= 50
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
		is_at_war = no
		highest_held_title_tier <= tier_kingdom
		NOT = { exists = title:e_bulgaria.holder }
	}

	effect = {
		save_scope_as = former
		#show_as_tooltip = { empire_of_bulgaria_decision_scripted_effect = yes }
		empire_of_bulgaria_decision_scripted_effect = yes
		
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_bulgaria
			}
			set_global_variable = {
				name = flag_formed_bulgaria
				value = scope:former
			}
		}
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}

form_albania_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes

	ai_check_interval = 120

	desc = form_albania_decision_desc
	selection_tooltip = form_albania_decision_tooltip

	is_shown = {
		is_ruler = yes
		is_landed = yes
		exists = dynasty
		OR = {
			culture = culture:arberian
			has_primary_title = title:k_sicily
			has_primary_title = title:k_naples
			has_primary_title = title:k_trinacria
		}

		NOT = {	#You can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:form_albania_decision
			}
		}
		OR = {
			has_government = feudal_government
			has_government = clan_government
		}
	}

	is_valid = {
		prestige_level >= 3
		is_independent_ruler = yes
		OR = {
			AND = {
				culture = culture:arberian
				highest_held_title_tier = tier_duchy
			}
			has_primary_title = title:k_sicily
			has_primary_title = title:k_naples
			has_primary_title = title:k_trinacria
		}
		#You must control the kingdom's heartlands.
		#has_title = title:d_dyrrachion
		completely_controls = title:d_dyrrachion

		#You must be sufficiently advanced to conceive of having a separate kingdom, rather than being Croatian or Serbian.
		#culture = { has_cultural_era_or_later = culture_era_early_medieval }
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		save_scope_as = founder
		form_albania_decision_scripted_effect = yes
		#show_as_tooltip = { form_albania_decision_scripted_effect = yes }
		#trigger_event = { id = east_europe.9201 }
		#Notify other players.
		
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:form_albania_decision
			}
		}
	}

	cost = {
		gold = 300
	}

	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}